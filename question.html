<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI 건강 진단</title>
  <style>
    :root {
      --bg:#0d1420;--panel:#121a26;--panel2:#182235;--line:#2a3a55;
      --brand:#6ba7ff;--muted:#9fb1cf;--white:#fff;
    }
    body {
      font-family:"Pretendard","Noto Sans KR",sans-serif;
      background:var(--bg);color:var(--white);margin:0;
      display:flex;flex-direction:column;align-items:center;min-height:100vh;
    }
    header {
      width:100%;background:var(--panel2);padding:18px 0;text-align:center;
      color:var(--brand);font-size:1.4em;font-weight:700;
      border-bottom:1px solid var(--line);
    }
    main {
      max-width:800px;width:90%;background:var(--panel);margin-top:30px;
      border-radius:14px;border:1px solid var(--line);box-shadow:0 0 10px rgba(0,0,0,.4);
      padding:30px 28px 40px;text-align:center;
    }
    h2 {color:#bcd4ff;margin-bottom:20px;font-size:1.2em;}
    .question-box {
      background:var(--panel2);border:1px solid var(--line);
      border-radius:12px;padding:20px;margin-bottom:22px;
    }
    .option {
      display:block;width:100%;background:#1f273b;border:1px solid #2b3a55;
      border-radius:10px;padding:14px;margin:6px 0;
      cursor:pointer;transition:.2s;color:#e8eeff;font-size:1em;
    }
    .option:hover {background:#26324d;}
    button {
      margin-top:20px;background:var(--brand);color:#fff;
      border:none;border-radius:10px;padding:12px 24px;cursor:pointer;
      font-size:1.05em;font-weight:600;transition:.2s;
    }
    button:hover {background:#5b8cff;}
    .progress {
      margin-top:10px;font-size:.9em;color:#9fb1cf;
    }
  </style>
</head>
<body>
  <header>노을빛하루 AI 건강 자가진단</header>
  <main>
    <h2 id="topicTitle">주제를 선택하세요</h2>
    <div class="question-box" id="questionBox">
      <p>AI 건강 진단을 시작하려면 주제를 선택하세요.</p>
      <div class="option" onclick="startTopic('관절 통증')">관절 통증</div>
      <div class="option" onclick="startTopic('혈압 관리')">혈압 관리</div>
      <div class="option" onclick="startTopic('혈당·당뇨')">혈당·당뇨</div>
      <div class="option" onclick="startTopic('불면증·수면장애')">불면증·수면장애</div>
      <div class="option" onclick="startTopic('어깨·목 통증')">어깨·목 통증</div>
      <div class="option" onclick="startTopic('심장·호흡·가슴통증')">심장·호흡·가슴통증</div>
      <div class="option" onclick="startTopic('노안·시력저하')">노안·시력저하</div>
      <div class="option" onclick="startTopic('치매·기억력 문제')">치매·기억력 문제</div>
      <div class="option" onclick="startTopic('전립선·배뇨 문제')">전립선·배뇨 문제</div>
      <div class="option" onclick="startTopic('종합 건강 체크')">종합 건강 체크</div>
    </div>

    <div id="quizSection" style="display:none;">
      <h2 id="quizTitle">문제 1/8</h2>
      <div class="question-box">
        <p id="questionText"></p>
        <div id="options"></div>
      </div>
      <button id="nextBtn" onclick="nextQuestion()">다음</button>
      <div class="progress" id="progressText"></div>
    </div>
  </main>

  <script>
    const questionSets = {
      "관절 통증": [
        "무릎이나 손목 등 관절이 자주 붓거나 통증이 있나요?",
        "아침에 일어날 때 관절이 뻣뻣하게 느껴지나요?",
        "계단 오르내리기가 힘들다고 느끼시나요?",
        "관절 통증으로 인해 수면에 방해를 받나요?",
        "최근 무리한 운동이나 외상을 경험하셨나요?",
        "통증이 한 달 이상 지속되고 있나요?",
        "진통제나 파스 등을 자주 사용하시나요?",
        "걸을 때 관절에서 소리가 나거나 마찰감이 느껴지나요?"
      ],
      "혈압 관리": [
        "혈압이 140/90mmHg 이상으로 측정된 적이 있나요?",
        "머리가 자주 무겁거나 어지럽나요?",
        "심장이 두근거리거나 가슴이 답답한 적이 있나요?",
        "평소 짠 음식을 자주 섭취하시나요?",
        "수면 중 코골이 또는 무호흡 증상이 있나요?",
        "흡연 또는 음주를 자주 하시나요?",
        "스트레스를 많이 받는 편인가요?",
        "최근 건강검진에서 고혈압 소견을 받은 적이 있나요?"
      ],
      "혈당·당뇨": [
        "공복 혈당이 126mg/dL 이상으로 측정된 적이 있나요?",
        "단 음식을 자주 섭취하시나요?",
        "체중이 최근 3개월 사이에 변동이 있었나요?",
        "자주 피로감을 느끼시나요?",
        "시야가 흐릿하거나 잦은 갈증을 느끼나요?",
        "상처가 잘 낫지 않거나 염증이 잘 생기나요?",
        "가족 중 당뇨병 환자가 있나요?",
        "최근 혈당 관리에 어려움을 느끼시나요?"
      ],
      "불면증·수면장애": [
        "잠들기까지 30분 이상 걸리나요?",
        "밤중에 자주 깨어나거나 새벽에 일찍 눈이 뜨이나요?",
        "수면 후에도 피로감이 남아있나요?",
        "스트레스나 걱정 때문에 잠이 방해받나요?",
        "수면제나 건강기능식품을 복용 중인가요?",
        "하루 수면 시간이 5시간 이하인가요?",
        "자주 낮 동안 졸음이 쏟아지나요?",
        "잠드는 환경(소음, 조명 등)이 불편한가요?"
      ],
      "어깨·목 통증": [
        "어깨나 목이 자주 뻣뻣하거나 통증이 있나요?",
        "컴퓨터나 스마트폰을 오래 사용하시나요?",
        "통증이 팔까지 내려가거나 저린 느낌이 있나요?",
        "머리를 돌릴 때 불편하거나 제한이 있나요?",
        "자고 일어난 후에도 통증이 지속되나요?",
        "스트레스나 피로 시 통증이 심해지나요?",
        "물리치료나 파스를 자주 사용하시나요?",
        "한쪽 어깨를 자주 사용하는 습관이 있나요?"
      ],
      "심장·호흡·가슴통증": [
        "가슴이 조이거나 압박감이 느껴지나요?",
        "평소 숨이 차거나 호흡이 가빠지나요?",
        "계단을 오를 때 쉽게 피로를 느끼나요?",
        "심장이 두근거리거나 불규칙하게 뛰나요?",
        "식사 후 명치 부근 통증이 있나요?",
        "가족 중 심혈관 질환 병력이 있나요?",
        "흡연 또는 고지방 식단을 유지하시나요?",
        "가슴 통증이 반복되거나 악화되나요?"
      ],
      "노안·시력저하": [
        "책이나 휴대폰 글씨가 흐릿하게 보이나요?",
        "눈의 피로감이 자주 느껴지나요?",
        "눈이 건조하거나 이물감이 있나요?",
        "어두운 곳에서 시야 확보가 어렵나요?",
        "안경 도수 변화가 잦은 편인가요?",
        "하루 3시간 이상 화면을 집중해서 보시나요?",
        "눈 주변 통증이나 두통이 있나요?",
        "가족 중 시력 관련 질환 병력이 있나요?"
      ],
      "치매·기억력 문제": [
        "최근 들어 물건을 자주 잃어버리나요?",
        "대화 중 단어가 생각나지 않아 머뭇거리나요?",
        "약속이나 날짜를 자주 잊나요?",
        "낯선 장소에서 방향 감각을 잃은 적이 있나요?",
        "가족이 기억력 저하를 지적한 적이 있나요?",
        "집중력이 예전보다 떨어졌다고 느끼시나요?",
        "기분 변화나 불안감이 자주 있나요?",
        "수면 부족 또는 피로가 누적되어 있나요?"
      ],
      "전립선·배뇨 문제": [
        "소변을 자주 보거나 급하게 보고 싶나요?",
        "밤에 자주 화장실을 가시나요?",
        "소변 줄기가 약해졌다고 느끼시나요?",
        "배뇨 후 잔뇨감이 있나요?",
        "하복부 불편감이나 통증이 있나요?",
        "물 섭취량이 적은 편인가요?",
        "카페인 음료를 자주 마시나요?",
        "전립선 관련 질환 진단을 받은 적이 있나요?"
      ],
      "종합 건강 체크": [
        "평소 식사 시간이 불규칙한가요?",
        "하루 6시간 이하로 수면하나요?",
        "운동을 거의 하지 않거나 드물게 하나요?",
        "스트레스를 자주 느끼시나요?",
        "최근 체중 변화가 있었나요?",
        "피로감이 쉽게 오나요?",
        "물 섭취가 하루 1L 미만인가요?",
        "정기 건강검진을 2년 이상 받지 않았나요?"
      ]
    };

    let topic = "";
    let qIndex = 0;
    let answers = [];

    function startTopic(selected) {
      topic = selected;
      localStorage.setItem("aiTopic", topic);
      document.getElementById("topicTitle").style.display = "none";
      document.getElementById("questionBox").style.display = "none";
      document.getElementById("quizSection").style.display = "block";
      showQuestion();
    }

    function showQuestion() {
      const set = questionSets[topic];
      if (!set) return;
      const question = set[qIndex];
      document.getElementById("quizTitle").textContent = `문제 ${qIndex + 1}/8`;
      document.getElementById("questionText").textContent = question;

      const options = [
        "전혀 그렇지 않다", "그렇지 않다", "보통이다",
        "약간 그렇다", "그렇다", "매우 그렇다"
      ];
      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      options.forEach(opt => {
        const btn = document.createElement("div");
        btn.className = "option";
        btn.textContent = opt;
        btn.onclick = () => selectAnswer(opt);
        optionsDiv.appendChild(btn);
      });
      document.getElementById("progressText").textContent = `${qIndex + 1}/8 문항 진행 중`;
    }

    function selectAnswer(answer) {
      answers[qIndex] = answer;
      nextQuestion();
    }

    function nextQuestion() {
      qIndex++;
      const set = questionSets[topic];
      if (qIndex < set.length) {
        showQuestion();
      } else {
        localStorage.setItem("aiAnswers", JSON.stringify(answers));
        // ✅ Render 서버용, 로컬 미사용
        window.location.href = "loading.html";
      }
    }
  </script>
</body>
</html>
