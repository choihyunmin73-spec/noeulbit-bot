<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë…¸ì„ë¹›í•˜ë£¨ AI ì§„ë‹¨ ê²°ê³¼</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;background:#f4f6fb;font-family:'Noto Sans KR',sans-serif}
.wrap{max-width:900px;margin:25px auto}
.card{background:#fff;padding:26px;border-radius:16px;box-shadow:0 5px 16px rgba(0,0,0,.08);margin-bottom:20px}
.title{font-size:24px;font-weight:800;margin-bottom:10px}
.pill{display:inline-block;background:#eef2ff;padding:7px 13px;border-radius:999px;margin:4px 6px 6px 0;font-size:13px;color:#3742b1}
.pill.red{background:#ffe7e7;color:#b91c1c}
h3{font-size:19px;margin:18px 0 10px}
li{font-size:16px;margin-bottom:6px;line-height:1.45}
.btn{background:#2f6efc;color:#fff;padding:18px;border-radius:12px;text-align:center;font-size:18px;cursor:pointer;margin-top:18px}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="title">ë…¸ì„ë¹›í•˜ë£¨ AI ë¶„ì„ ê²°ê³¼</div>
    <div id="pills"></div>
    <p id="summary"></p>
  </div>
  <div class="card">
    <h3>ğŸ¤– AI ì¢…í•© ë¶„ì„</h3>
    <div id="aiSummary"></div>
  </div>
  <div class="card">
    <h3>âœ… ì…€í”„ ì¼€ì–´ ê°€ì´ë“œ</h3>
    <ul id="tips"></ul>
  </div>
  <div class="card">
    <h3>âš ï¸ ìœ„í—˜ ì‹ í˜¸</h3>
    <ul id="redflags"></ul>
  </div>
  <div class="card">
    <h3>ğŸ§¾ ì„ íƒí•œ í•­ëª©</h3>
    <div id="selected"></div>
  </div>
  <div class="btn" onclick="location.href='/'">â† ë‹¤ì‹œ ì§„ë‹¨í•˜ê¸°</div>
</div>

<script>
(function(){
  const raw=new URLSearchParams(location.search).get("payload");
  let data={}; try{data=JSON.parse(decodeURIComponent(raw));}catch(e){document.body.innerHTML="ê²°ê³¼ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";return;}
  const sevClass=data.severity==="ë†’ìŒ"?"red":"";
  document.getElementById("pills").innerHTML=`<span class="pill">ì£¼ì œ: ${data.topic}</span><span class="pill ${sevClass}">ìœ„í—˜ë„: ${data.severity}</span><span class="pill">ì§„ë£Œê³¼: ${data.dept}</span>`;
  document.getElementById("summary").textContent=data.action;
  document.getElementById("aiSummary").textContent=data.aiSummary;
  document.getElementById("tips").innerHTML=(data.tips||[]).map(t=>`<li>${t}</li>`).join("");
  document.getElementById("redflags").innerHTML=(data.redflags||[]).length?data.redflags.map(r=>`<li>${r}</li>`).join(""):"<li>íŠ¹ë³„í•œ ìœ„í—˜ ì‹ í˜¸ ì—†ìŒ</li>";
  document.getElementById("selected").innerHTML=(data.checks||[]).map(c=>`<span class="pill">${c}</span>`).join("");
})();
</script>
</body>
</html>
