<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ë…¸ì„ë¹›í•˜ë£¨ AI ì¢…í•© ì§„ë‹¨ ê²°ê³¼</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  :root{
    --bg:#f5f7fb; --card:#fff; --shadow:0 6px 18px rgba(0,0,0,.07);
    --text:#111827; --muted:#6b7280; --brand:#2f6efc;
    --border:#c9d2f0;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);font-family:'Noto Sans KR',system-ui,-apple-system,Segoe UI,Roboto,sans-serif;color:var(--text)}
  .container{max-width:1320px;margin:28px auto;display:flex;gap:20px;padding:0 14px}
  .left{flex:2;background:var(--card);border-radius:16px;box-shadow:var(--shadow);padding:28px}
  .right{flex:1;background:var(--card);border-radius:16px;box-shadow:var(--shadow);padding:24px}
  .title{font-weight:800;font-size:24px;margin:0 0 8px}
  .sub{color:var(--muted);font-size:15px;margin:0 0 20px}
  .result-box{border:2px solid var(--border);border-radius:12px;padding:22px;display:flex;gap:28px;align-items:center;margin-bottom:22px}
  .result-chart{width:250px;height:250px;flex:0 0 250px}
  .result-detail{flex:1;line-height:1.75;font-size:15.5px}
  .section{margin-top:26px}
  .section h3{font-size:18px;margin:0 0 12px;border-left:6px solid var(--brand);padding-left:10px}
  ul.clean{list-style:none;margin:0;padding-left:10px}
  ul.clean li{margin:6px 0;line-height:1.6}
  .btn{margin-top:18px;background:var(--brand);color:#fff;border:none;border-radius:12px;padding:16px 18px;font-size:17px;cursor:pointer;width:100%}
  .aff-title{color:#1e40af;font-size:18px;margin:0 0 12px}
  .card{border:1px solid #e5e7eb;border-radius:12px;padding:14px;margin-bottom:14px;transition:.2s}
  .card:hover{background:#f0f4ff;border-color:#9db0ff}
  .card img{width:100%;height:180px;object-fit:cover;border-radius:10px;margin-bottom:10px;background:#eef1f9}
  .card a{color:#1e3a8a;text-decoration:none;font-weight:700}
  .card .desc{font-size:14px;color:#4b5563;margin-top:4px}
  .ins{margin-top:22px;padding-top:16px;border-top:1px solid #e5e7eb}
  .ins h3{border-left:5px solid #10b981;padding-left:10px;color:#065f46;font-size:17px;margin:0 0 10px}
  .ins .card{background:#ecfdf5;border-color:#cfe8e1}
  .ins .card a{color:#047857}
  @media (max-width:1024px){
    .container{flex-direction:column}
    .result-box{flex-direction:column;align-items:flex-start}
    .result-chart{width:200px;height:200px}
  }
</style>
</head>
<body>

<div class="container">
  <!-- LEFT: ê²°ê³¼ -->
  <div class="left">
    <h1 class="title">ğŸ’  ë…¸ì„ë¹›í•˜ë£¨ AI ì¢…í•© ì§„ë‹¨ ê²°ê³¼</h1>
    <p class="sub">AI ë¶„ì„ ê¸°ë°˜ìœ¼ë¡œ ê°œì¸ ë§ì¶¤í˜• ìƒíƒœë¥¼ ìš”ì•½í•©ë‹ˆë‹¤.</p>

    <!-- ê·¸ë˜í”„ + ìƒì„¸ -->
    <div class="result-box">
      <canvas id="riskChart" class="result-chart" aria-label="ìœ„í—˜ë„ ê·¸ë˜í”„"></canvas>
      <div id="detail" class="result-detail"></div>
    </div>

    <section class="section">
      <h3>AI ì¢…í•© ì§„ë‹¨ ìš”ì•½</h3>
      <ul id="summary" class="clean"></ul>
    </section>

    <section class="section">
      <h3>ì¢…í•© ì˜ê²¬</h3>
      <p id="opinion" style="margin:0"></p>
    </section>

    <button class="btn" onclick="location.href='/'">â† ë‹¤ì‹œ ì§„ë‹¨í•˜ê¸°</button>
  </div>

  <!-- RIGHT: ì œíœ´ / ë³´í—˜ -->
  <aside class="right">
    <h3 class="aff-title">ì¶”ì²œ ì œíœ´ìƒí’ˆ</h3>
    <div id="affList"></div>

    <div class="ins">
      <h3>ì¶”ì²œ ë³´í—˜ ì œíœ´ ì„œë¹„ìŠ¤</h3>
      <div id="insList"></div>
    </div>
  </aside>
</div>

<script>
/* ========= 1) ê³µí†µ ìœ í‹¸ ========= */
const qs = new URLSearchParams(location.search);
const payloadStr = qs.get("payload");
let topicParam = qs.get("topic");

/* payload ì§€ì› (ì˜ˆì „ ë²„ì „ê³¼ í˜¸í™˜) */
let payload = null;
if (payloadStr) {
  try { payload = JSON.parse(decodeURIComponent(payloadStr)); } catch {}
}
const TOPIC = (payload && payload.topic) || topicParam || "ê´€ì ˆ í†µì¦";

/* ========= 2) ì£¼ì œë³„ ì„¤ì • (12ê°œ) ========= */
const riskConfig = {
  "ê´€ì ˆ í†µì¦":        { percent: 86, color:"#f97316" },
  "í˜ˆì•• ê´€ë¦¬":        { percent: 78, color:"#ef4444" },
  "í˜ˆë‹¹Â·ë‹¹ë‡¨":        { percent: 74, color:"#dc2626" },
  "ë¶ˆë©´ì¦Â·ìˆ˜ë©´ì¥ì• ":  { percent: 62, color:"#eab308" },
  "ì–´ê¹¨Â·ëª© í†µì¦":     { percent: 69, color:"#fb923c" },
  "ì‹¬ì¥Â·í˜¸í¡Â·ê°€ìŠ´í†µì¦":{ percent: 88, color:"#b91c1c" },
  "ë…¸ì•ˆÂ·ì‹œë ¥ì €í•˜":    { percent: 55, color:"#06b6d4" },
  "ì¹˜ë§¤Â·ê¸°ì–µë ¥ ë¬¸ì œ":  { percent: 72, color:"#9333ea" },
  "ì „ë¦½ì„ Â·ë°°ë‡¨ ë¬¸ì œ":  { percent: 67, color:"#2563eb" },
  "ì¢…í•© ê±´ê°• ì²´í¬":    { percent: 58, color:"#14b8a6" },
  "ë³´ì´ìŠ¤í”¼ì‹± ì˜ˆë°©":   { percent: 83, color:"#0ea5e9" },
  "ë³µì§€Â·ìƒí™œì§€ì›ê¸ˆ":   { percent: 64, color:"#10b981" }
};

/* ì£¼ì œë³„ 10ì¤„ ìƒì„¸ì„¤ëª… í…œí”Œë¦¿ */
const detailTemplates = {
  "ê´€ì ˆ í†µì¦": [
    "ì´ˆê¸° ê´€ì ˆì—¼ ì˜ì‹¬ ë‹¨ê³„ë¡œ í‰ê°€ë©ë‹ˆë‹¤.",
    "ê³„ë‹¨ ì˜¤ë¥´ë‚´ë¦¬ê¸°Â·ì¥ì‹œê°„ ë³´í–‰ì—ì„œ í†µì¦ì´ ì•…í™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ì•„ì¹¨ ë»£ë»£í•¨ê³¼ êµ­ì†Œ ì••í†µì´ ë°˜ë³µë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.",
    "ì—°ê³¨ ë§ˆëª¨ ì§„í–‰ì´ ì˜ˆì¸¡ë˜ì–´ ì²´ì¤‘ ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.",
    "í—ˆë²…ì§€Â·ì—‰ë©ì´ ê·¼ìœ¡ ê°•í™”ê°€ í†µì¦ ê°ì†Œì— í•µì‹¬ì…ë‹ˆë‹¤.",
    "ìš´ë™ ì§í›„ 10ë¶„ ëƒ‰ì°œì§ˆ, í‰ì†Œ 15ë¶„ ì˜¨ì°œì§ˆì„ ê¶Œì¥í•©ë‹ˆë‹¤.",
    "30~40ë¶„ë§ˆë‹¤ 2~3ë¶„ ê°€ë³ê²Œ ê±·ê¸°(ì¥ì‹œê°„ ì•‰ì•„ìˆê¸° ê¸ˆì§€).",
    "ì¿ ì…˜ì´ ì¢‹ì€ ìš´ë™í™” + ë‚´ì¸¡ì§€ì§€ ê¹”ì°½ì„ ì¶”ì²œí•©ë‹ˆë‹¤.",
    "ë³´ì¡°ì ìœ¼ë¡œ MSMÂ·ì˜¤ë©”ê°€3Â·ë¹„íƒ€ë¯¼ D/K2 ì„­ì·¨ê°€ ë„ì›€ë©ë‹ˆë‹¤.",
    "ì¦ìƒ ì¦ê°€ ì‹œ ì˜ìƒê²€ì‚¬(X-ray/ì´ˆìŒíŒŒ) ë° ì „ë¬¸ì¹˜ë£Œê°€ í•„ìš”í•©ë‹ˆë‹¤."
  ],
  "í˜ˆì•• ê´€ë¦¬": [
    "í˜ˆì•• ë³€ë™ì„±ì´ ì»¤ ê´€ë¦¬ê°€ í•„ìš”í•œ ë‹¨ê³„ë¡œ íŒë‹¨ë©ë‹ˆë‹¤.",
    "ë‘í†µÂ·ì–´ì§€ëŸ¬ì›€Â·ê°€ìŠ´ ë‹µë‹µí•¨ ë™ë°˜ ì‹œ ì¦‰ì‹œ ì§„ë£Œê°€ í•„ìš”í•©ë‹ˆë‹¤.",
    "ì—¼ë¶„Â·ì•¼ì‹Â·ê°€ê³µì‹í’ˆì„ ì¤„ì´ê³  ìˆ˜ë¶„ ì„­ì·¨ë¥¼ ê·œì¹™ì ìœ¼ë¡œ ìœ ì§€í•˜ì„¸ìš”.",
    "í•˜ë£¨ 30ë¶„ ê±·ê¸°Â·ê·¼ë ¥ìš´ë™ ë³‘í–‰ì´ í˜ˆì•• ì•ˆì •ì— íš¨ê³¼ì ì…ë‹ˆë‹¤.",
    "ìˆ˜ë©´ ë¶€ì¡±ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ í˜ˆì•• ìƒìŠ¹ì— í° ì˜í–¥ì„ ì¤ë‹ˆë‹¤.",
    "ìê¸° ì „ ìŠ¤ë§ˆíŠ¸í°Â·ì¹´í˜ì¸ì„ ì¤„ì´ê³  ì¼ì •í•œ ìˆ˜ë©´ì‹œê°„ì„ ìœ ì§€í•˜ì„¸ìš”.",
    "ì•½ ë³µìš© ì¤‘ì´ë¼ë©´ ì‹œê°„Â·ìš©ëŸ‰ì„ ëŠ˜ ë™ì¼í•˜ê²Œ ì§€í‚¤ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.",
    "ì§‘ì—ì„œëŠ” ì•„ì¹¨/ì €ë… 2íšŒ, 1ì£¼ ê¸°ë¡ì„ ìœ ì§€í•´ ì˜ì‚¬ì™€ ìƒì˜í•˜ì„¸ìš”.",
    "ì˜¤ë©”ê°€3Â·ì½”íí… ë“±ì€ ë³´ì¡°ì ìœ¼ë¡œ ë„ì›€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ê°‘ì‘ìŠ¤ëŸ¬ìš´ í‰í†µÂ·í˜¸í¡ê³¤ë€ ì‹œ 119/ì‘ê¸‰ì‹¤ì„ ê¶Œì¥í•©ë‹ˆë‹¤."
  ],
  "í˜ˆë‹¹Â·ë‹¹ë‡¨": [
    "ì‹í›„ í˜ˆë‹¹ ìƒìŠ¹ íŒ¨í„´ì´ ì˜ì‹¬ë˜ì–´ ì‹ì‚¬ ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.",
    "ë‹¨ìˆœë‹¹/ì •ì œ íƒ„ìˆ˜í™”ë¬¼ì„ ì¤„ì´ê³  ì‹ì´ì„¬ìœ ë¥¼ ëŠ˜ë¦¬ì„¸ìš”.",
    "ì‹ì‚¬ ìˆœì„œë¥¼ ì±„ì†Œâ†’ë‹¨ë°±ì§ˆâ†’íƒ„ìˆ˜í™”ë¬¼ë¡œ ì¡°ì •í•˜ë©´ ë„ì›€ì´ ë©ë‹ˆë‹¤.",
    "í•˜ë£¨ 20~30ë¶„ ì‚°ì±… ë˜ëŠ” ì‹í›„ 10ë¶„ ê±·ê¸°ê°€ í˜ˆë‹¹ ì™„í™”ì— íš¨ê³¼ì ì…ë‹ˆë‹¤.",
    "ì²´ì¤‘ 5~7% ê°ëŸ‰ë§Œìœ¼ë¡œë„ ë‹¹ ëŒ€ì‚¬ê°€ ê°œì„ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ìˆ˜ë©´ë¶€ì¡±ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ëŠ” ì¸ìŠë¦° ì €í•­ì„±ì„ ë†’ì…ë‹ˆë‹¤.",
    "ì˜¤ë©”ê°€3Â·ë§ˆê·¸ë„¤ìŠ˜Â·í¬ë¡¬ì€ ë³´ì¡°ì ìœ¼ë¡œ ë„ì›€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ìƒì²˜ íšŒë³µì´ ëŠë¦¬ê±°ë‚˜ ì¦ì€ ê°ˆì¦/ë‹¤ë‡¨ê°€ ì§€ì†ë˜ë©´ ì§„ë£Œê°€ í•„ìš”í•©ë‹ˆë‹¤.",
    "í˜ˆë‹¹ê¸°ë¡(ê³µë³µ/ì‹í›„2ì‹œê°„)ì„ 1~2ì£¼ ìˆ˜ì§‘í•´ ìƒë‹´í•˜ì„¸ìš”.",
    "ì €í˜ˆë‹¹ ì¦ìƒ ì‹œ ì¦‰ì‹œ ë‹¹ë¶„ ì„­ì·¨ í›„ ì˜ë£Œ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤."
  ],
  "ë¶ˆë©´ì¦Â·ìˆ˜ë©´ì¥ì• ": [
    "ìˆ˜ë©´ ìœ„ìƒì˜ ê°œì„ ì´ í•„ìš”í•œ ë‹¨ê³„ë¡œ ë³´ì…ë‹ˆë‹¤.",
    "ì·¨ì¹¨Â·ê¸°ìƒì‹œê°„ì„ ì¼ì •í•˜ê²Œ ìœ ì§€í•˜ì„¸ìš”(ì£¼ë§ í¬í•¨).",
    "ì˜¤í›„ ì¹´í˜ì¸/ë‹ˆì½”í‹´Â·ëŠ¦ì€ ìš´ë™ì€ ìˆ˜ë©´ ì§ˆì„ í¬ê²Œ ë–¨ì–´ëœ¨ë¦½ë‹ˆë‹¤.",
    "ì ìë¦¬ì—ì„œëŠ” ìŠ¤ë§ˆíŠ¸í°Â·TV ì‚¬ìš©ì„ ì¤‘ë‹¨í•˜ì„¸ìš”.",
    "ë‚®ì ì€ 20ë¶„ ì´ë‚´, ì˜¤í›„ ëŠ¦ê²ŒëŠ” í”¼í•˜ì„¸ìš”.",
    "ì¹¨ì‹¤ì€ ì–´ë‘¡ê³  ì„œëŠ˜í•˜ê²Œ ìœ ì§€í•˜ê³  ì†ŒìŒì„ ìµœì†Œí™”í•˜ì„¸ìš”.",
    "ìŠ¤íŠ¸ë ˆìŠ¤ ì™„í™”ë¥¼ ìœ„í•œ í˜¸í¡Â·ëª…ìƒÂ·ë°˜ì‹ ìš•ì´ ë„ì›€ì´ ë©ë‹ˆë‹¤.",
    "ìˆ˜ë©´ì œê°€ í•„ìš”í•œ ê²½ìš° ë°˜ë“œì‹œ ì „ë¬¸ê°€ ìƒë‹´ í›„ ë³µìš©í•˜ì„¸ìš”.",
    "ìˆ˜ë©´ë¬´í˜¸í¡Â·ì£¼ê¸°ì„± ì‚¬ì§€ìš´ë™ ì˜ì‹¬ ì‹œ ê²€ì‚¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
    "í”¼ë¡œÂ·ì§‘ì¤‘ë ¥ ì €í•˜ê°€ ì§€ì†ë˜ë©´ ì „ë¬¸ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤."
  ],
  "ì–´ê¹¨Â·ëª© í†µì¦": [
    "ìì„¸ì„± í†µì¦ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤(ê±°ë¶ëª©/ì¥ì‹œê°„ ì•‰ê¸°).",
    "ëª¨ë‹ˆí„° ë†’ì´Â·ì˜ì ë“± í™˜ê²½ì„ êµì •í•˜ì„¸ìš”.",
    "30ë¶„ë§ˆë‹¤ ê°€ë²¼ìš´ ëª©/ì–´ê¹¨ ìŠ¤íŠ¸ë ˆì¹­ì´ í•„ìš”í•©ë‹ˆë‹¤.",
    "í•µì‹¬ ê°•í™”: ìŠ¹ëª¨ê·¼ í•˜ë¶€Â·ê´‘ë°°ê·¼Â·ì–´ê¹¨ íšŒì „ê·¼ê°œ.",
    "ë¬´ê±°ìš´ ê°€ë°©Â·í•œìª½ ì–´ê¹¨ ì‚¬ìš© ìŠµê´€ì„ í”¼í•˜ì„¸ìš”.",
    "ì˜¨ì°œì§ˆ 15ë¶„, í†µì¦ ê¸‰ì¦ ì‹œ 10ë¶„ ëƒ‰ì°œì§ˆì„ ê¶Œì¥í•©ë‹ˆë‹¤.",
    "ë² ê°œ ë†’ì´ë¥¼ ì¡°ì ˆí•´ ëª©ì˜ ì¤‘ë¦½ ì •ë ¬ì„ ìœ ì§€í•˜ì„¸ìš”.",
    "í†µì¦ì´ íŒ” ì €ë¦¼Â·ê·¼ë ¥ì €í•˜ì™€ ë™ë°˜ë˜ë©´ ì§„ë£Œê°€ í•„ìš”í•©ë‹ˆë‹¤.",
    "ë§ˆì‚¬ì§€ê±´ì€ 1ë¶€ìœ„ 1~2ë¶„ ì´ë‚´ë¡œ ê°€ë³ê²Œ ì‚¬ìš©í•˜ì„¸ìš”.",
    "ì¦ìƒ ì¥ê¸°í™” ì‹œ ë„ìˆ˜/ë¬¼ë¦¬ì¹˜ë£Œ ë° ì˜ìƒê²€ì‚¬ë¥¼ ê³ ë ¤í•©ë‹ˆë‹¤."
  ],
  "ì‹¬ì¥Â·í˜¸í¡Â·ê°€ìŠ´í†µì¦": [
    "ì‹¬ê·¼í—ˆí˜ˆ/ë¶€ì •ë§¥ ë“± ê°ë³„ì´ í•„ìš”í•œ ê³ ìœ„í—˜ ë²”ì£¼ì…ë‹ˆë‹¤.",
    "ìš´ë™ ì‹œ í‰í†µÂ·í˜¸í¡ê³¤ë€Â·ì‹ì€ë•€ ë™ë°˜ ì‹œ ì¦‰ì‹œ ì§„ë£Œë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.",
    "í˜ˆì••/ì§€ì§ˆ/ë‹¹ ì¡°ì ˆì´ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.",
    "í¡ì—°Â·ê³¼ìŒÂ·ê³ ì—¼ì‹ì€ ë°˜ë“œì‹œ êµì •í•´ì•¼ í•©ë‹ˆë‹¤.",
    "ê·œì¹™ì  ìœ ì‚°ì†Œ 150ë¶„/ì£¼, ê·¼ë ¥ 2~3íšŒ/ì£¼ë¥¼ ëª©í‘œë¡œ í•˜ì„¸ìš”.",
    "ì•¼ê°„ í‰í†µÂ·ì™¼íŒ” ì €ë¦¼Â·ì§ˆì‹ê°ì€ ì‘ê¸‰ ì‹ í˜¸ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ì˜¤ë©”ê°€3Â·ì½”íí…ì€ ë³´ì¡° íš¨ê³¼ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ê°€ì¡±ë ¥Â·ê³¼ê±°ë ¥ ì¡´ì¬ ì‹œ ì „ë¬¸ì˜ ì¶”ì ê´€ì°°ì´ í•„ìš”í•©ë‹ˆë‹¤.",
    "ê°‘ì‘ìŠ¤ëŸ° ì¦ìƒì€ ì§€ì²´ ì—†ì´ 119 ì—°ë½ì„ ê¶Œì¥í•©ë‹ˆë‹¤.",
    "ë³µìš© ì•½ë¬¼ì€ ì˜ë£Œì§„ê³¼ ìƒì˜ í›„ ì¡°ì •í•˜ì„¸ìš”."
  ],
  "ë…¸ì•ˆÂ·ì‹œë ¥ì €í•˜": [
    "ê·¼ê±°ë¦¬ ì‘ì—… ì‹œ í”¼ë¡œê°€ ì¦ê°€í•˜ëŠ” ë‹¨ê³„ë¡œ ë³´ì…ë‹ˆë‹¤.",
    "ë‹ë³´ê¸°/ì•ˆê²½ êµì • ì—¬ë¶€ë¥¼ ì ê²€í•˜ì„¸ìš”.",
    "ì¸ê³µëˆˆë¬¼Â·íœ´ì‹ìœ¼ë¡œ ì•ˆêµ¬ê±´ì¡°ë¥¼ ì™„í™”í•˜ì„¸ìš”.",
    "20-20-20 ê·œì¹™(20ë¶„ë§ˆë‹¤ 20ì´ˆ, 6m ë°”ë¼ë³´ê¸°)ì„ ì‹¤ì²œí•˜ì„¸ìš”.",
    "ë°ê¸° ëŒ€ë¹„ê°€ ë†’ì€ í™˜ê²½ì„ ìœ ì§€í•˜ê³  ì—­ê´‘ì„ í”¼í•˜ì„¸ìš”.",
    "ì˜¤ë©”ê°€3Â·ë£¨í…Œì¸/ì§€ì•„ì”í‹´ì´ ë³´ì¡°ì ìœ¼ë¡œ ë„ì›€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ë‹¹ë‡¨Â·ê³ í˜ˆì•• ë™ë°˜ ì‹œ ì •ê¸° ì•ˆê³¼ê²€ì§„ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.",
    "ì•¼ê°„ ëˆˆë¶€ì‹¬Â·ë¹› ë²ˆì§ì´ ì‹¬í•˜ë©´ ê²€ì‚¬ í•„ìš”ì„±ì´ í½ë‹ˆë‹¤.",
    "ì½˜íƒíŠ¸ë Œì¦ˆ ìœ„ìƒ/ì°©ìš©ì‹œê°„ì„ ì§€í‚¤ì„¸ìš”.",
    "ì‹œë ¥ ë³€í™”ê°€ ê¸‰ê²©í•˜ë©´ ì¦‰ì‹œ ë‚´ì›í•˜ì„¸ìš”."
  ],
  "ì¹˜ë§¤Â·ê¸°ì–µë ¥ ë¬¸ì œ": [
    "ê²½ë„ì¸ì§€ì¥ì•  ê°€ëŠ¥ì„±ì´ ìˆì–´ ì´ˆê¸° ê´€ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
    "ê·œì¹™ì  ìˆ˜ë©´Â·ê·œì¹™ì  ì‹ì‚¬Â·ì‚¬íšŒì  í™œë™ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.",
    "ì¼ì •í‘œ/ë©”ëª¨ ìŠµê´€ìœ¼ë¡œ ì‘ì—…ê¸°ì–µì„ ë³´ì¡°í•˜ì„¸ìš”.",
    "ê±·ê¸°Â·ê·¼ë ¥Â·ê· í˜•ìš´ë™ì´ ì¸ì§€ê¸°ëŠ¥ì— ê¸ì •ì ì…ë‹ˆë‹¤.",
    "ì§€ì¤‘í•´ì‹Â·DASH ì‹ë‹¨ì´ ì¥ê¸°ì  ë³´í˜¸íš¨ê³¼ë¥¼ ë³´ì…ë‹ˆë‹¤.",
    "ìš°ìš¸Â·ë¶ˆì•ˆ ì¡°ì ˆì€ ê¸°ì–µë ¥ì— í° ì˜í–¥ì„ ì¤ë‹ˆë‹¤.",
    "ê³ í˜ˆì••Â·ë‹¹ë‡¨Â·ì§€ì§ˆì´ìƒ ê´€ë¦¬ê°€ í•„ìˆ˜ì ì…ë‹ˆë‹¤.",
    "ì˜¤ë©”ê°€3Â·ë¹„íƒ€ë¯¼Bêµ°ì€ ë³´ì¡°ì  ë„ì›€ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.",
    "ê°‘ì‘ìŠ¤ëŸ° ì•…í™” ì‹œ ë‡Œ ì˜ìƒÂ·í˜ˆì•¡ê²€ì‚¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
    "ê°€ì¡±ê³¼ í•¨ê»˜ ì•ˆì „ê³„íš(ë‚™ìƒÂ·ê°€ìŠ¤ ë“±)ì„ ì ê²€í•˜ì„¸ìš”."
  ],
  "ì „ë¦½ì„ Â·ë°°ë‡¨ ë¬¸ì œ": [
    "ë¹ˆë‡¨Â·ì•½í•œ ì†Œë³€ì¤„ê¸°Â·ì•¼ê°„ë‡¨ê°€ ë°˜ë³µë  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.",
    "ìˆ˜ë¶„ì€ ë‚® ì‹œê°„ëŒ€ì—, ì·¨ì¹¨ ì „ ìˆ˜ë¶„ì€ ì¤„ì´ì„¸ìš”.",
    "ì¹´í˜ì¸Â·íƒ„ì‚°Â·ë§¤ìš´ ìŒì‹ì€ ë°©ê´‘ ìê·¹ì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ì¼€ê²” ìš´ë™ìœ¼ë¡œ ê³¨ë°˜ì € ê·¼ìœ¡ì„ ê°•í™”í•˜ì„¸ìš”.",
    "ì”ë‡¨ê°Â·í˜ˆë‡¨Â·í†µì¦ì´ ì§€ì†ë˜ë©´ ì¦‰ì‹œ ì§„ë£Œë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.",
    "ì „ë¦½ì„ ë¹„ëŒ€/ì—¼ì¦ ê°ë³„ì„ ìœ„í•´ ê²€ì‚¬ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ê·œì¹™ì  ìš´ë™ê³¼ ì²´ì¤‘ ê´€ë¦¬ê°€ ì¦ìƒ ì™„í™”ì— ë„ì›€ë©ë‹ˆë‹¤.",
    "ì•Œì½”ì˜¬ ê³¼ë‹¤ì„­ì·¨ëŠ” ì•¼ê°„ë‡¨ë¥¼ ì•…í™”ì‹œí‚µë‹ˆë‹¤.",
    "ì˜¨ì°œì§ˆë¡œ í•˜ë³µë¶€ ê¸´ì¥ì„ ì™„í™”í•˜ì„¸ìš”.",
    "ì˜ë£Œì§„ê³¼ ì•½ë¬¼ì¹˜ë£Œ í•„ìš” ì—¬ë¶€ë¥¼ ìƒì˜í•˜ì„¸ìš”."
  ],
  "ì¢…í•© ê±´ê°• ì²´í¬": [
    "ì „ë°˜ì  í”¼ë¡œ/ìˆ˜ë©´/í™œë™ ì €í•˜ê°€ ê´€ì°°ë©ë‹ˆë‹¤.",
    "ê·œì¹™ì  ìˆ˜ë©´Â·ê· í˜• ì¡íŒ ì‹ì‚¬ë¡œ ê¸°ì´ˆ ì²´ë ¥ì„ íšŒë³µí•˜ì„¸ìš”.",
    "í•˜ë£¨ 7,000~8,000ë³´ ê±·ê¸°ë¶€í„° ì‹œì‘í•˜ì„¸ìš”.",
    "ìŠ¤íŠ¸ë ˆì¹­ê³¼ ê°€ë²¼ìš´ ê·¼ë ¥ìš´ë™ì„ ë³‘í–‰í•˜ì„¸ìš”.",
    "ì²´ì¤‘Â·í˜ˆì••Â·í˜ˆë‹¹ ê¸°ë¡ìœ¼ë¡œ ì¶”ì„¸ë¥¼ ê´€ë¦¬í•˜ì„¸ìš”.",
    "ìˆ˜ë¶„ ì„­ì·¨ì™€ ì„¬ìœ ì§ˆì„ ëŠ˜ë¦¬ë©´ í™œë ¥ì´ ê°œì„ ë©ë‹ˆë‹¤.",
    "ì¹´í˜ì¸Â·ì•¼ì‹Â·ê³¼ìŒì€ ì¤„ì´ì„¸ìš”.",
    "ëª©í‘œë¥¼ ì‘ê²Œ ìª¼ê°œ 2ì£¼ ë‹¨ìœ„ë¡œ ê²€í† í•˜ì„¸ìš”.",
    "ì •ê¸° ê²€ì§„ìœ¼ë¡œ ê¸°ì €ì§ˆí™˜ì„ ì¡°ê¸°ì— í™•ì¸í•˜ì„¸ìš”.",
    "ì§€ì† ì•…í™” ì‹œ ê°€ì •ì˜í•™ê³¼ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤."
  ],
  "ë³´ì´ìŠ¤í”¼ì‹± ì˜ˆë°©": [
    "ìµœê·¼ íŒ¨í„´: íƒë°°/ê°€ì¡±/ê¸ˆìœµê¸°ê´€ ì‚¬ì¹­ ë§í¬ ìœ ë„ ì¦ê°€.",
    "ë§í¬ í´ë¦­ í›„ ì•± ì„¤ì¹˜Â·ê³µì¸ì¸ì¦ ì…ë ¥ ìš”êµ¬ëŠ” 100% ì‚¬ê¸°.",
    "ê³„ì¢Œì´ì²´Â·ê°€ìƒí™”í ìš”êµ¬ëŠ” ì¦‰ì‹œ ì¤‘ë‹¨í•˜ê³  ì‹ ê³ í•˜ì„¸ìš”.",
    "ë³¸ì¸í™•ì¸ì€ ë°˜ë“œì‹œ ê³µì‹ ì•±/ì „í™”ë²ˆí˜¸ë¡œ ì¬í™•ì¸í•˜ì„¸ìš”.",
    "ì›ê²©ì œì–´ ì•± ì„¤ì¹˜ ìœ ë„ ì‹œ ì¦‰ì‹œ ì°¨ë‹¨Â·ì‚­ì œí•˜ì„¸ìš”.",
    "ì˜ì‹¬ ì—°ë½ì€ ë…¹ì·¨Â·ìº¡ì²˜ í›„ 112Â·1332ì— ì‹ ê³ í•˜ì„¸ìš”.",
    "ê°€ì¡± ì´ë¦„Â·ì§í•¨ ì‚¬ì¹­ ë¬¸êµ¬ì— ì£¼ì˜í•˜ì„¸ìš”.",
    "ê¸ˆì „/ê°œì¸ì •ë³´ ìš”êµ¬ëŠ” ì˜¤í”„ë¼ì¸ í™•ì¸ì„ ì›ì¹™ìœ¼ë¡œ.",
    "ë©”ì‹ ì € í”¼ì‹±ì€ ì˜ìƒí†µí™” í™•ì¸ìœ¼ë¡œ ì°¨ë‹¨í•˜ì„¸ìš”.",
    "ìŠ¤ë¯¸ì‹± ì°¨ë‹¨ ì„¤ì •ê³¼ ë³´ì•ˆ ì—…ë°ì´íŠ¸ë¥¼ ìœ ì§€í•˜ì„¸ìš”."
  ],
  "ë³µì§€Â·ìƒí™œì§€ì›ê¸ˆ": [
    "ì‹ ì²­ ëˆ„ë½ì´ ì¦ì€ í•­ëª©ì„ ìë™ ì ê²€í•´ ë“œë¦½ë‹ˆë‹¤.",
    "ê¸°ì´ˆì—°ê¸ˆÂ·ì˜ë£Œë¹„Â·ë‚œë°©ë¹„Â·êµí†µë¹„ ì§€ì› ì¡°ê±´ì„ í™•ì¸í•˜ì„¸ìš”.",
    "ì†Œë“Â·ì¬ì‚°Â·ì„¸ëŒ€êµ¬ì„±ì— ë”°ë¥¸ ë§ì¶¤í˜• ì œë„ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.",
    "ì˜¨ë¼ì¸/ìë©´ë™ ì£¼ë¯¼ì„¼í„°ì—ì„œ ê°„í¸ ì‹ ì²­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
    "ì‹ ë¶„ì¦Â·í†µì¥ì‚¬ë³¸Â·ê±´ê°•ë³´í—˜ìê²©í™•ì¸ì„œ ë“±ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ìƒë‹´ì„ í†µí•´ ì¤‘ë³µ ìˆ˜í˜œ ê°€ëŠ¥ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì„¸ìš”.",
    "ì‚¬ì¹­ ë¬¸ìÂ·ì•± ì„¤ì¹˜ ìš”êµ¬ëŠ” ì ˆëŒ€ ì‘í•˜ì§€ ë§ˆì„¸ìš”.",
    "ì‹ ì²­ ê¸°í•œÂ·ì§€ê¸‰ì£¼ê¸°Â·ì‹¬ì‚¬ ê¸°ê°„ì„ ë©”ëª¨ë¡œ ê´€ë¦¬í•˜ì„¸ìš”.",
    "ì¥ê¸° ìš”ì–‘Â·ì¥ì•  ë“±ë¡ ë“± ì¶”ê°€ ì œë„ë¥¼ í•¨ê»˜ ê²€í† í•˜ì„¸ìš”.",
    "ë„ì›€ì´ í•„ìš”í•˜ë©´ ì§€ìì²´ ìƒë‹´ ì°½êµ¬ë¡œ ì—°ê²°í•´ ë“œë¦½ë‹ˆë‹¤."
  ]
};

/* ì£¼ì œë³„ ë³´í—˜ ì¶”ì²œ(ìš°ì¸¡) */
const insuranceByTopic = {
  "ê´€ì ˆ í†µì¦": [
    { title:"ì •í˜•ì™¸ ì‹¤ì†/ì…ì› íŠ¹í™” ë¹„êµ", link:"https://example.com/ins-ortho", desc:"ê´€ì ˆÂ·ë¬¼ë¦¬ì¹˜ë£Œ ë³´ì¥ í•­ëª© ì¤‘ì  ë¹„êµ" },
    { title:"ë…¸í›„ ì‹¤ì† í”Œëœ", link:"https://example.com/ins-senior", desc:"ìë¶€ë‹´ ìµœì†Œí™”í˜• ì„ íƒì§€ ì•ˆë‚´" }
  ],
  "í˜ˆì•• ê´€ë¦¬": [
    { title:"ì‹¬ë‡Œí˜ˆê´€ ì§‘ì¤‘ ë³´ì¥", link:"https://example.com/ins-cardi", desc:"ë‡Œì¶œí˜ˆÂ·ê¸‰ì„±ì‹¬ê·¼ê²½ìƒ‰ íŠ¹ì•½ ë¹„êµ" },
    { title:"ë§Œì„±ì§ˆí™˜ ì‹¤ì† ì—…ê·¸ë ˆì´ë“œ", link:"https://example.com/ins-chronic", desc:"ê³ í˜ˆì•• ë™ë°˜ììš© íŠ¹ì•½ êµ¬ì¡°" }
  ],
  "í˜ˆë‹¹Â·ë‹¹ë‡¨": [
    { title:"ë‹¹ë‡¨ í•©ë³‘ì¦ ë³´ì¥ ë¹„êµ", link:"https://example.com/ins-dm", desc:"ë‹¹ë‡¨ì„±ë§ë§‰ë³‘ì¦/ì‹ ì¥ë³‘ ë³€ì•¡ ì•ˆë‚´" }
  ],
  "ë¶ˆë©´ì¦Â·ìˆ˜ë©´ì¥ì• ": [
    { title:"ì •ì‹ ê±´ê°• ì§„ë£Œë¹„ ë³´ì¥", link:"https://example.com/ins-mental", desc:"ìƒë‹´Â·ì•½ì œë¹„ íŠ¹ì•½ ì—¬ë¶€ ì ê²€" }
  ],
  "ì–´ê¹¨Â·ëª© í†µì¦": [
    { title:"ê·¼ê³¨ê²©ê³„ ë„ìˆ˜Â·ì¬í™œ ë³´ì¥", link:"https://example.com/ins-msk", desc:"ë„ìˆ˜/PT í•œë„ ë†’ì€ í”Œëœ" }
  ],
  "ì‹¬ì¥Â·í˜¸í¡Â·ê°€ìŠ´í†µì¦": [
    { title:"ì‹¬ì¥/í˜¸í¡ê¸° ì§‘ì¤‘ ë³´ì¥", link:"https://example.com/ins-heart", desc:"ì¤‘ì¦ë„ ê¸‰ì—¬Â·ë¹„ê¸‰ì—¬ í•­ëª© ì„¤ê³„" }
  ],
  "ë…¸ì•ˆÂ·ì‹œë ¥ì €í•˜": [
    { title:"ì•ˆê³¼ ìˆ˜ìˆ Â·ê²€ì‚¬ íŠ¹ì•½", link:"https://example.com/ins-eye", desc:"ë…¸ì•ˆìˆ˜ìˆ /ë°±ë‚´ì¥ ë³´ì¥ ë¹„êµ" }
  ],
  "ì¹˜ë§¤Â·ê¸°ì–µë ¥ ë¬¸ì œ": [
    { title:"ì¹˜ë§¤ ê°„ë³‘/ìƒí™œë¹„ ë³´ì¥", link:"https://example.com/ins-dementia", desc:"ì¹˜ë§¤ ë‹¨ê³„ë³„ ê°„ë³‘ë¹„ ì§€ê¸‰í˜•" }
  ],
  "ì „ë¦½ì„ Â·ë°°ë‡¨ ë¬¸ì œ": [
    { title:"ë¹„ë‡¨ê¸° ìˆ˜ìˆ /ì…ì› ë³´ì¥", link:"https://example.com/ins-uro", desc:"ì…ì›ì¼ë‹¹/ìˆ˜ìˆ ë¹„ íŠ¹ì•½ ë¹„êµ" }
  ],
  "ì¢…í•© ê±´ê°• ì²´í¬": [
    { title:"ì „ë°˜ ì‹¤ì† + ì•”/ë‡Œ/ì‹¬ì¥ 3ëŒ€ì§ˆí™˜", link:"https://example.com/ins-general", desc:"ê°€ì„±ë¹„ ì¢…í•© ì„¤ê³„" }
  ],
  "ë³´ì´ìŠ¤í”¼ì‹± ì˜ˆë°©": [
    { title:"ê¸ˆìœµì‚¬ê¸° ë°°ìƒ ì±…ì„ ì•ˆë‚´", link:"https://example.com/ins-fraud", desc:"ê³„ì •Â·ê³„ì¢Œ ë„ë‚œ í”¼í•´ ë³´ì¥ ì—¬ë¶€" }
  ],
  "ë³µì§€Â·ìƒí™œì§€ì›ê¸ˆ": [
    { title:"ì˜ë£Œë¹„ ë¶€ë‹´ ê²½ê°í˜•", link:"https://example.com/ins-welfare", desc:"ê¸°ì´ˆ ìˆ˜ê¸‰Â·ê²½ê° ì œë„ì™€ ë³‘í–‰" }
  ]
};

/* ========= 3) ë Œë”ë§ ========= */
(async function render(){
  /* analysis.json ì—ì„œ ìš”ì•½/ì˜ê²¬ */
  let summary = [], opinion = "";
  try {
    const analysis = await fetch("analysis.json").then(r=>r.json());
    const a = analysis[TOPIC];
    if (a) { summary = a.summary || []; opinion = a.opinion || ""; }
  } catch(e){ /* íŒŒì¼ì´ ì—†ì–´ë„ ë™ì‘í•˜ë„ë¡ */ }

  /* ìƒì„¸ ì„¤ëª… 10ì¤„ */
  const detailLines = detailTemplates[TOPIC] || ["í˜„ì¬ ìƒíƒœ í•´ì„ ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.","ì¶”ê°€ ì ê²€ì´ í•„ìš”í•©ë‹ˆë‹¤."];
  document.getElementById("detail").innerHTML = detailLines.join("<br>");

  /* ìš”ì•½/ì˜ê²¬ */
  document.getElementById("summary").innerHTML = (summary.length?summary:[
    "í˜„ì¬ ìƒíƒœì— ëŒ€í•œ ê¸°ë³¸ ê°€ì´ë“œë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.",
    "ì¶”ê°€ ê²€ì§„ ë° ìƒí™œ ê´€ë¦¬ ê³„íšì„ ìˆ˜ë¦½í•˜ì„¸ìš”."
  ]).map(s=>`<li>${s}</li>`).join("");
  document.getElementById("opinion").textContent = opinion || "ê°œì¸ ìƒí™©ì— ë§ëŠ” ì„¸ë¶€ ê³„íšì€ ì „ë¬¸ì˜ ìƒë‹´ í›„ ê²°ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.";

  /* ìœ„í—˜ë„ ê³„ì‚°( payload.severity ê°€ ìˆìœ¼ë©´ ê°€ì¤‘ ) */
  let { percent, color } = riskConfig[TOPIC] || { percent: 60, color:"#2f6efc" };
  if (payload && payload.severity){
    // ê°„ë‹¨í•œ ë§µí•‘: ë‚®ìŒ/ì¤‘ê°„/ë†’ìŒ
    const sev = String(payload.severity);
    if (sev.includes("ë†’")) percent = Math.max(percent, 80);
    else if (sev.includes("ì¤‘")) percent = Math.max(percent, 65);
    else percent = Math.min(percent, 55);
  }

  /* ì°¨íŠ¸ */
  const ctx = document.getElementById("riskChart");
  new Chart(ctx, {
    type: "doughnut",
    data: {
      datasets: [{
        data:[percent, 100-percent],
        backgroundColor:[color, "#e5e7eb"],
        borderWidth:0
      }]
    },
    options: {
      cutout: "75%",
      plugins:{
        legend:{display:false},
        tooltip:{enabled:false},
        title:{
          display:true,
          text:`ìœ„í—˜ë„ ${percent}%`,
          color:"#1e3a8a",
          font:{size:18,weight:"bold"},
          position:"center"
        }
      }
    }
  });

  /* ì œíœ´ìƒí’ˆ */
  try{
    const aff = await fetch("affiliate.json").then(r=>r.json());
    const list = aff[TOPIC] || [];
    const wrap = document.getElementById("affList");
    wrap.innerHTML = list.map(item=>{
      const img = item.img || `https://via.placeholder.com/600x380.png?text=${encodeURIComponent(item.title)}`;
      return `
        <div class="card">
          <img src="${img}" alt="${item.title}">
          <a href="${item.link}" target="_blank" rel="noopener">${item.title}</a>
          <div class="desc">${item.desc||""}</div>
        </div>
      `;
    }).join("") || `<div class="card"><div class="desc">ì¤€ë¹„ëœ ì œíœ´ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</div></div>`;
  }catch(e){
    document.getElementById("affList").innerHTML = `<div class="card"><div class="desc">affiliate.jsonì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</div></div>`;
  }

  /* ë³´í—˜ ì œíœ´ */
  const ins = insuranceByTopic[TOPIC] || [];
  document.getElementById("insList").innerHTML = ins.map(x=>`
    <div class="card">
      <a href="${x.link}" target="_blank" rel="noopener">${x.title}</a>
      <div class="desc">${x.desc||""}</div>
    </div>
  `).join("") || `<div class="card"><div class="desc">ì¤€ë¹„ëœ ë³´í—˜ ì œíœ´ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</div></div>`;
})();
</script>

</body>
</html>
