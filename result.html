<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë…¸ì„ë¹›í•˜ë£¨ AI ì¢…í•© ì§„ë‹¨ ê²°ê³¼</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root {
  --bg:#f5f7fb; --card:#fff; --shadow:0 6px 18px rgba(0,0,0,.07);
  --text:#111827; --muted:#6b7280; --brand:#2563eb; --border:#c9d2f0;
}
* {box-sizing:border-box;}
body {
  margin:0; background:var(--bg);
  font-family:'Noto Sans KR',sans-serif; color:var(--text);
}
.container {
  max-width:1320px; margin:28px auto; display:flex; gap:20px;
  padding:0 14px; flex-wrap:nowrap;
}
.left {flex:2; background:var(--card); border-radius:16px; box-shadow:var(--shadow); padding:28px;}
.right {flex:1; background:var(--card); border-radius:16px; box-shadow:var(--shadow); padding:24px;}
.title {font-weight:800; font-size:24px; margin:0 0 8px;}
.sub {color:var(--muted); font-size:15px; margin:0 0 20px;}
.result-box {
  border:2px solid var(--border); border-radius:12px; padding:24px;
  display:flex; align-items:flex-start; justify-content:flex-start; gap:24px;
  margin-bottom:24px; flex-wrap:nowrap;
}
.result-chart {width:240px!important; height:240px!important; flex-shrink:0;}
.result-detail {flex:1; word-break:keep-all; line-height:1.7; font-size:15.5px; color:#333;}
.result-detail strong {color:var(--brand);}
.section {margin-top:26px;}
.section h3 {font-size:18px; margin:0 0 12px; border-left:6px solid var(--brand); padding-left:10px;}
ul.clean {list-style:none; margin:0; padding-left:10px;}
ul.clean li {margin:6px 0; line-height:1.6;}
.btn {
  margin-top:18px; background:var(--brand); color:#fff; border:none;
  border-radius:12px; padding:16px 18px; font-size:17px; cursor:pointer; width:100%;
}
.aff-title {color:#1e40af; font-size:18px; margin:0 0 12px;}
.card {
  border:1px solid #e5e7eb; border-radius:12px; padding:14px; margin-bottom:14px;
  transition:.2s; cursor:pointer; overflow:hidden;
}
.card:hover {background:#f0f4ff; border-color:#9db0ff; transform:translateY(-3px);}
.card img {
  width:100%; height:160px; object-fit:cover; border-radius:10px;
  margin-bottom:10px; background:#eef1f9;
}
.card-title {color:#1e3a8a; text-decoration:none; font-weight:700; font-size:15px;}
.card .desc {font-size:14px; color:#4b5563; margin-top:4px;}
.ins {margin-top:22px; padding-top:16px; border-top:1px solid #e5e7eb;}
.ins h3 {border-left:5px solid #10b981; padding-left:10px; color:#065f46; font-size:17px; margin:0 0 10px;}
.ins .card {background:#ecfdf5; border-color:#cfe8e1;}
.ins .card:hover {background:#d1fae5;}
.ins .card-title {color:#047857;}

@media(max-width:1000px){
  .container{flex-direction:column;}
  .result-box{flex-direction:column; align-items:center;}
  .result-chart{width:200px!important; height:200px!important;}
  .result-detail{width:100%; text-align:left; font-size:15px;}
  .right{width:100%; margin-top:20px;}
}
@media(max-width:600px){
  body{font-size:14px;}
  .result-detail{font-size:14.5px; line-height:1.6;}
  .card img{height:120px;}
  #affList, #insList {display:grid; grid-template-columns:repeat(2,1fr); gap:12px;}
  .card{margin-bottom:0; padding:10px;}
}
</style>
</head>
<body>

<div class="container">
  <!-- LEFT -->
  <div class="left">
    <h1 class="title">ğŸ’  ë…¸ì„ë¹›í•˜ë£¨ AI ì¢…í•© ì§„ë‹¨ ê²°ê³¼</h1>
    <p class="sub">AI ë¶„ì„ ê¸°ë°˜ìœ¼ë¡œ ê°œì¸ ë§ì¶¤í˜• ìƒíƒœë¥¼ ìš”ì•½í•©ë‹ˆë‹¤.</p>

    <div class="result-box">
      <canvas id="riskChart" class="result-chart"></canvas>
      <div id="detail" class="result-detail"></div>
    </div>

    <section class="section">
      <h3>AI ì¢…í•© ì§„ë‹¨ ìš”ì•½</h3>
      <ul id="summary" class="clean"></ul>
    </section>

    <section class="section">
      <h3>ì¢…í•© ì˜ê²¬</h3>
      <p id="opinion" style="margin:0"></p>
    </section>

    <button class="btn" onclick="location.href='/'">â† ë‹¤ì‹œ ì§„ë‹¨í•˜ê¸°</button>
  </div>

  <!-- RIGHT -->
  <aside class="right">
    <h3 class="aff-title">ì¶”ì²œ ì œíœ´ìƒí’ˆ</h3>
    <div id="affList"></div>

    <div class="ins">
      <h3>ì¶”ì²œ ë³´í—˜ ì œíœ´ ì„œë¹„ìŠ¤</h3>
      <div id="insList"></div>
    </div>
  </aside>
</div>

<script>
const qs = new URLSearchParams(location.search);
const payloadStr = qs.get("payload");
let topicParam = qs.get("topic");
let payload = null;
if (payloadStr) { try { payload = JSON.parse(decodeURIComponent(payloadStr)); } catch {} }
const TOPIC = (payload && payload.topic) || topicParam || "ì–´ê¹¨Â·ëª© í†µì¦";

/* ìœ„í—˜ë„ ë° ì„¤ëª… */
const riskData = {
  "ì–´ê¹¨Â·ëª© í†µì¦": {percent:74,color:"#fb923c",desc:"ê·¼ìœ¡ ê¸´ì¥ ë° ì–´ê¹¨ ê²°ë¦¼ì´ ëˆ„ì ëœ ìƒíƒœì…ë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆì¹­ ë° ì˜¨ì°œì§ˆë¡œ ê°œì„  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤."},
  "í˜ˆì•• ê´€ë¦¬": {percent:78,color:"#ef4444",desc:"í˜ˆì•• ë³€ë™ì„±ì´ ë†’ì•„ ìƒí™œ ê´€ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤. ê·œì¹™ì  ìš´ë™ê³¼ ì—¼ë¶„ ì œí•œì´ í•„ìˆ˜ì…ë‹ˆë‹¤."},
  "ê´€ì ˆ í†µì¦": {percent:86,color:"#f97316",desc:"ì´ˆê¸° ê´€ì ˆì—¼ ì˜ì‹¬ ë‹¨ê³„ë¡œ í‰ê°€ë©ë‹ˆë‹¤. í™œë™ í›„ í†µì¦Â·ë¶“ê¸° ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤."}
};

/* ì§„ë‹¨ ìš”ì•½ ì˜ˆì‹œ */
const summaryText = {
  "ì–´ê¹¨Â·ëª© í†µì¦": [
    "ì¥ì‹œê°„ ìŠ¤ë§ˆíŠ¸í°Â·ì»´í“¨í„° ì‚¬ìš©ì— ì˜í•œ ê·¼ìœ¡ í”¼ë¡œ ëˆ„ì .",
    "ì˜¨ì°œì§ˆê³¼ ê°€ë²¼ìš´ ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ ì™„í™” ê°€ëŠ¥.",
    "ìì„¸ êµì • ë°´ë“œ ë° ê·¼ìœ¡ ì´ì™„ ë³´ì¡°ê¸°êµ¬ ì¶”ì²œ."
  ],
  "í˜ˆì•• ê´€ë¦¬": [
    "ìˆ˜ì¶•ê¸° í˜ˆì•• ìƒìŠ¹ ê²½í–¥ í™•ì¸ë¨.",
    "ì—¼ë¶„ ì„­ì·¨ ì¤„ì´ê³  ê·œì¹™ì  ìˆ˜ë©´ í•„ìš”.",
    "ê¾¸ì¤€í•œ ìœ ì‚°ì†Œ ìš´ë™ìœ¼ë¡œ í˜ˆì•• ì•ˆì •í™” ê¸°ëŒ€."
  ]
};

/* ë³´í—˜ ì œíœ´ì„œë¹„ìŠ¤ */
const insuranceList = [
  {title:"ì‹¤ì†ë³´í—˜ ë¹„êµ", link:"#", desc:"ë³‘ì›ë¹„Â·ì•½ê°’ ë¶€ë‹´ ì¤„ì´ëŠ” ìµœì‹  ì‹¤ì† í”Œëœ ë¹„êµ"},
  {title:"ì§ˆë³‘ ë³´ì¥í˜• í”Œëœ", link:"#", desc:"ë§Œì„±ì§ˆí™˜Â·ì…ì› ëŒ€ë¹„ ì¢…í•©ë³´ì¥í˜• ì„¤ê³„ ì¶”ì²œ"}
];

/* ì œíœ´ìƒí’ˆ ì˜ˆì‹œ */
const affList = [
  {title:"ì˜¨ì—´ ì–´ê¹¨ì°œì§ˆê¸°",desc:"í˜ˆë¥˜ ê°œì„  ë° ê·¼ìœ¡ ì´ì™„",img:"https://via.placeholder.com/600x400.png?text=ì˜¨ì—´+ì°œì§ˆê¸°",link:"#"},
  {title:"ìì„¸ êµì • ë°´ë“œ",desc:"ê±°ë¶ëª©Â·ì–´ê¹¨ ê¸´ì¥ ì™„í™”",img:"https://via.placeholder.com/600x400.png?text=ìì„¸+ë°´ë“œ",link:"#"},
  {title:"ë§ˆê·¸ë„¤ìŠ˜ ì˜ì–‘ì œ",desc:"ê·¼ìœ¡ í”¼ë¡œ íšŒë³µ ì§€ì›",img:"https://via.placeholder.com/600x400.png?text=ë§ˆê·¸ë„¤ìŠ˜",link:"#"}
];

/* ì‹¤í–‰ */
(function render(){
  const risk = riskData[TOPIC] || {percent:60,color:"#2f6efc",desc:"ìƒì„¸ ë¶„ì„ ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤."};
  const ctx=document.getElementById("riskChart");
  new Chart(ctx,{
    type:"doughnut",
    data:{datasets:[{data:[risk.percent,100-risk.percent],backgroundColor:[risk.color,"#e5e7eb"],borderWidth:0}]},
    options:{cutout:"75%",plugins:{legend:{display:false},tooltip:{enabled:false}}}
  });

  document.getElementById("detail").innerHTML = `
    <strong>AI ë¶„ì„ê²°ê³¼:</strong> ìœ„í—˜ë„ ${risk.percent}% ë‹¨ê³„ì…ë‹ˆë‹¤.<br>
    ${risk.desc}<br>
    ìƒí™œìŠµê´€ ì¡°ì • ë° ì „ë¬¸ê°€ ìƒë‹´ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
  `;

  const sum = summaryText[TOPIC] || ["í˜„ì¬ ìƒíƒœì— ëŒ€í•œ ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.","ì¶”ê°€ ì ê²€ì´ í•„ìš”í•©ë‹ˆë‹¤."];
  document.getElementById("summary").innerHTML = sum.map(s=>`<li>${s}</li>`).join("");
  document.getElementById("opinion").textContent = "ì§€ì†ì  ìŠ¤íŠ¸ë ˆì¹­, ê·œì¹™ì  ìˆ˜ë©´, ê·¼ìœ¡ì´ì™„ ê´€ë¦¬ê°€ í•µì‹¬ì…ë‹ˆë‹¤.";

  document.getElementById("affList").innerHTML = affList.map(a=>`
    <div class="card" onclick="window.open('${a.link}','_blank')">
      <img src="${a.img}" alt="${a.title}">
      <div class="card-title">${a.title}</div>
      <div class="desc">${a.desc}</div>
    </div>
  `).join("");

  document.getElementById("insList").innerHTML = insuranceList.map(i=>`
    <div class="card" onclick="window.open('${i.link}','_blank')">
      <div class="card-title">${i.title}</div>
      <div class="desc">${i.desc}</div>
    </div>
  `).join("");
})();
</script>

</body>
</html>
