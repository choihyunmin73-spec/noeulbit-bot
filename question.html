<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>AI 증상 체크 | 노을빛하루</title>

<style>
    body {
        font-family: 'Noto Sans KR', sans-serif;
        background:#f3f6fb;
        margin:0;
        padding:0;
    }

    .header {
        background:#0f4fff;
        color:white;
        padding:22px;
        font-size:22px;
        text-align:center;
        font-weight:700;
    }

    .wrapper {
        max-width:650px;
        margin:40px auto;
        background:white;
        padding:35px;
        border-radius:15px;
        box-shadow:0 5px 18px rgba(0,0,0,0.12);
    }

    .question-title {
        font-size:22px;
        font-weight:600;
        margin-bottom:25px;
        color:#0f4fff;
        line-height:1.4;
    }

    .option {
        padding:14px;
        background:#eef3ff;
        border-radius:10px;
        margin:12px 0;
        cursor:pointer;
        transition:0.25s;
        border:2px solid transparent;
        font-size:17px;
    }
    .option:hover {
        background:#dce7ff;
        border-color:#0f4fff;
    }

    .progress {
        margin-top:25px;
        text-align:center;
        color:#555;
        font-size:16px;
    }
</style>
</head>

<body>

<div class="header">증상 체크</div>

<div class="wrapper">

    <div class="question-title" id="question-text"></div>

    <div id="options"></div>

    <div class="progress">
        <span id="progress-text"></span>
    </div>

</div>

<script>
/* ✅ 전달된 topic 받기 */
const params = new URLSearchParams(window.location.search);
const topic = params.get("topic");

/* ✅ 12개 주제 × 8문항 × 6보기 전체 구조 */
const survey = {

"관절 통증": [
{ q:"현재 관절 통증 정도를 가장 잘 설명하는 것은?", opt:["가벼운 통증","움직일 때만 통증","지속적 통증","점점 심해짐","움직이기 어려움","해당 없음"] },
{ q:"통증이 시작된 시기는?", opt:["1주 미만","1주~1개월","1개월 이상","갑자기 발생","반복적으로 발생","해당 없음"] },
{ q:"통증 강도는?", opt:["약함","중간","심함","매우 심함","잠에서 깰 정도","해당 없음"] },
{ q:"통증이 심해지는 상황은?", opt:["걷기","계단","오래 서기","아침","밤에 심해짐","해당 없음"] },
{ q:"동반 증상은?", opt:["붓기","열감","뻣뻣함","저림","관절 소리","해당 없음"] },
{ q:"일상생활 영향은?", opt:["거의 없음","가벼운 불편","활동 어려움","오래 걷기 어려움","일상 전반 지장","해당 없음"] },
{ q:"비슷한 통증 이력은?", opt:["처음","가끔","자주 반복","계절 반복","특정 활동 후","해당 없음"] },
{ q:"현재 상태는?", opt:["참을 만함","관리가 필요","병원 고려","걷기 힘듦","심해지는 중","해당 없음"] }
],

"혈압 관리": [
{ q:"현재 혈압 상태는?", opt:["정상에 가까움","가끔 높음","지속적으로 높음","약 먹어도 높음","갑자기 상승","해당 없음"] },
{ q:"혈압 불안정 시기?", opt:["1주","1주~1개월","1개월 이상","반복적 발생","특정 상황에서만","해당 없음"] },
{ q:"혈압이 오를 때 증상?", opt:["어지러움","두통","두근거림","얼굴 달아오름","가슴 답답함","해당 없음"] },
{ q:"혈압 올라가는 상황?", opt:["스트레스","움직일 때","일어날 때","식사 후","원인 없음","해당 없음"] },
{ q:"추가 증상?", opt:["피로","시야 흐림","숨 가쁨","저림","집중력 저하","해당 없음"] },
{ q:"일상 영향?", opt:["없음","가끔","활동 줄어듦","자주 피곤","생활 어려움","해당 없음"] },
{ q:"약 복용 여부?", opt:["복용 중","가끔 잊음","불규칙","복용 안 함","고려 중","해당 없음"] },
{ q:"현재 본인 상태?", opt:["괜찮음","관리 필요","약 필요","악화 중","즉시 상담 필요","해당 없음"] }
],

"혈당·당뇨": [
{ q:"최근 혈당 상태는?", opt:["정상","가끔 높음","지속적으로 높음","식후만 높음","공복도 높음","해당 없음"] },
{ q:"혈당 문제 시작?", opt:["1주","1주~1개월","1개월 이상","반복적","갑자기 증가","해당 없음"] },
{ q:"고혈당 증상?", opt:["갈증","잦은 소변","피로감","식후 졸림","체중 변화","해당 없음"] },
{ q:"혈당 올라가는 상황?", opt:["식사 후","단 음식","운동 부족","스트레스","패턴 없음","해당 없음"] },
{ q:"추가 증상?", opt:["저림","시야 흐림","상처 회복 느림","불규칙 맥박","과식","해당 없음"] },
{ q:"일상 영향?", opt:["없음","피곤","활동 감소","식사 유지 어려움","생활 어려움","해당 없음"] },
{ q:"당뇨 치료 여부?", opt:["약 복용","인슐린","가끔 빼먹음","약 복용 안 함","전단계 진단","해당 없음"] },
{ q:"현재 상태?", opt:["관리됨","주의 필요","치료 필요","악화 중","위험 신호","해당 없음"] }
],

"불면증·수면장애": [
{ q:"현재 수면 문제는?", opt:["잠들기 어렵다","중간에 깸","일찍 깸","숙면 불가","자도 피곤함","해당 없음"] },
{ q:"수면 문제 시작?", opt:["1주","1주~1개월","1개월 이상","계절 반복","스트레스 이후","해당 없음"] },
{ q:"잠드는 데 걸리는 시간?", opt:["10분","30분","1시간","2시간","잠들기 어려움","해당 없음"] },
{ q:"잠이 깨는 이유?", opt:["소음","통증","원인 없음","악몽","화장실","해당 없음"] },
{ q:"추가 증상?", opt:["피로","집중력 저하","불안","우울","식욕 변화","해당 없음"] },
{ q:"수면이 일상에 미치는 영향?", opt:["없음","약간","집중 어려움","활동 감소","생활 지장","해당 없음"] },
{ q:"수면 습관?", opt:["규칙적","불규칙","늦게 잠듦","낮잠 잦음","스마트폰 사용 후","해당 없음"] },
{ q:"현재 상태?", opt:["괜찮음","원인 파악 필요","상담 고려","악화 중","조치 필요","해당 없음"] }
],

"어깨·목 통증": [
{ q:"통증 형태?", opt:["뻐근함","뻣뻣함","날카로운 통증","당김","목 잘 안 돌아감","해당 없음"] },
{ q:"시작 시점?", opt:["1주 미만","1주~1개월","1개월 이상","반복적","갑작스럽게","해당 없음"] },
{ q:"심해지는 상황?", opt:["고개 숙일 때","컴퓨터 후","아침","무거운 물건","원인 없음","해당 없음"] },
{ q:"동반 증상?", opt:["두통","팔 저림","어깨 결림","등 통증","힘 빠짐","해당 없음"] },
{ q:"생활 영향?", opt:["없음","가끔","장시간 앉기 어려움","집중 어려움","생활 지장","해당 없음"] },
{ q:"자세 문제?", opt:["구부정","거북목","오래 앉음","높은 베개","나쁜 수면자세","해당 없음"] },
{ q:"지속 패턴?", opt:["간헐적","지속적","악화 중","활동 후 악화","잠 방해","해당 없음"] },
{ q:"현재 상태?", opt:["경미","스트레칭 필요","치료 고려","악화 중","병원 필요","해당 없음"] }
],

"심장·호흡·가슴통증": [
{ q:"현재 증상?", opt:["가슴 통증","숨 가쁨","두근거림","답답함","찌르는 듯","해당 없음"] },
{ q:"시작 시점?", opt:["1주","1주~1개월","1개월 이상","반복적","갑자기 발생","해당 없음"] },
{ q:"증상 상황?", opt:["운동 시","계단","감정 변화","식사 후","원인 없음","해당 없음"] },
{ q:"동반 증상?", opt:["어지러움","식은땀","팔 통증","호흡 곤란","빠른 맥박","해당 없음"] },
{ q:"지속 시간?", opt:["1분","수 분","10분 이상","휴식 후 완화","지속됨","해당 없음"] },
{ q:"생활 영향?", opt:["없음","가끔","활동 줄어듦","걷기 어려움","심각함","해당 없음"] },
{ q:"과거력?", opt:["고혈압","당뇨","고지혈증","심장 질환 의심","약 복용 중","해당 없음"] },
{ q:"현재 상태?", opt:["괜찮음","주의 필요","악화","위험 신호","즉시 상담","해당 없음"] }
],

"노안·시력저하": [
{ q:"시력 저하 유형?", opt:["가까운 글씨 흐림","먼 거리 흐림","눈 피로","초점 전환 어려움","빛 번짐","해당 없음"] },
{ q:"시작 시점?", opt:["1주","1주~1개월","1개월 이상","점차 악화","갑작스러움","해당 없음"] },
{ q:"불편한 상황?", opt:["독서","TV","운전","어두운 곳","밝은 곳","해당 없음"] },
{ q:"동반 증상?", opt:["두통","눈 시림","눈물","건조함","충혈","해당 없음"] },
{ q:"생활 영향?", opt:["경미","가끔","집중 어려움","독서 어려움","생활 지장","해당 없음"] },
{ q:"교정 여부?", opt:["안경","오래된 안경","돋보기","렌즈","교정 안 함","해당 없음"] },
{ q:"눈 사용 시 변화?", opt:["괜찮음","피로","건조함 증가","두통","초점 흐려짐","해당 없음"] },
{ q:"현재 상태?", opt:["괜찮음","돋보기 필요","교정 필요","악화 중","검사 필요","해당 없음"] }
],

"치매·기억력 문제": [
{ q:"기억 변화?", opt:["최근 기억 저하","반복 질문","약속 잊음","물건 분실","집중력 저하","해당 없음"] },
{ q:"시작 시점?", opt:["1주","1주~1개월","1개월 이상","악화 중","가족이 먼저 느낌","해당 없음"] },
{ q:"시간·장소 혼동?", opt:["시간 헷갈림","날짜 모름","길 찾기 어려움","위치 혼동","특정 상황 혼란","해당 없음"] },
{ q:"일상 능력 변화?", opt:["문제 없음","가끔 헷갈림","계산 어려움","집안일 어려움","중요 일 실수","해당 없음"] },
{ q:"언어 변화?", opt:["단어 안 떠오름","단어 찾기 어려움","대화 어려움","타인 말 이해 어려움","말수 감소","해당 없음"] },
{ q:"감정 변화?", opt:["짜증","불안","우울","무기력","성격 변화","해당 없음"] },
{ q:"판단력 변화?", opt:["실수 증가","충동 구매","위험 판단 약화","사기 취약","일상 판단 어려움","해당 없음"] },
{ q:"현재 상태?", opt:["경미","주의","악화","가족 도움 필요","전문 상담 필요","해당 없음"] }
],

"전립선·배뇨 문제": [
{ q:"배뇨 문제?", opt:["잦은 소변","약한 소변","잔뇨감","야간뇨","통증 동반","해당 없음"] },
{ q:"시작 시점?", opt:["1주","1주~1개월","1개월 이상","반복적","갑자기 심해짐","해당 없음"] },
{ q:"배뇨 불편?", opt:["가벼움","따끔거림","통증","중간 끊김","오래 걸림","해당 없음"] },
{ q:"소변 색?", opt:["정상","탁함","진한 노랑","붉은빛","거품 많음","해당 없음"] },
{ q:"추가 증상?", opt:["하복부 통증","허리 통증","피로","열감","성기능 저하","해당 없음"] },
{ q:"생활 영향?", opt:["없음","가끔","외출 불편","수면 방해","생활 지장","해당 없음"] },
{ q:"과거력?", opt:["전립선염","전립선비대증","방광염","약 복용 중","최근 검사","해당 없음"] },
{ q:"현재 상태?", opt:["경미","악화됨","약 필요","병원 고려","즉시 검사 필요","해당 없음"] }
],

"종합 건강 체크": [
{ q:"건강 상태?", opt:["양호","피곤","기력 저하","통증","활동 어려움","해당 없음"] },
{ q:"식습관?", opt:["규칙적","불규칙","과식","입맛 없음","단 음식 많음","해당 없음"] },
{ q:"수면?", opt:["양호","얕은 잠","자주 깸","잠 오래 걸림","수면 부족","해당 없음"] },
{ q:"활동량?", opt:["충분","보통","거의 없음","피로해 어려움","최근 감소","해당 없음"] },
{ q:"스트레스?", opt:["없음","약간","보통","높음","매우 높음","해당 없음"] },
{ q:"체중 변화?", opt:["없음","증가","급증","감소","급감","해당 없음"] },
{ q:"만성질환?", opt:["없음","고혈압","당뇨","심장질환","기타","해당 없음"] },
{ q:"현재 느낌?", opt:["괜찮음","관리 필요","악화","피로 누적","검진 필요","해당 없음"] }
],

"보이스피싱 예방": [
{ q:"의심 연락 경험?", opt:["없음","광고","택배 사칭","금융기관 사칭","가족 사칭","여러 번"] },
{ q:"금전 요구?", opt:["없음","소액 요구","큰 금액","계좌이체","개인정보 요구","기타"] },
{ q:"링크 클릭?", opt:["안 클릭","클릭했지만 입력 없음","개인정보 입력","로그인","앱 설치","기억 안 남"] },
{ q:"스미싱 종류?", opt:["택배","청구서","지원금","은행 보안","지인 사칭","기타"] },
{ q:"대비 수준?", opt:["잘 앎","기본만 암","헷갈림","불안함","의심 사례 있음","모름"] },
{ q:"현재 위험?", opt:["없음","불안 연락","개인정보 노출","계좌 요구","앱 설치 유도","기타"] },
{ q:"주변 피해?", opt:["없음","친구 피해","가족 피해","지인 피해","본인 피해","모름"] },
{ q:"현재 단계?", opt:["괜찮음","주의","링크 점검","즉시 조치","금융기관 문의","기타"] }
],

"복지·생활지원금": [
{ q:"관심 지원금?", opt:["노인 복지","재난지원금","의료비","주거","생활비","기타"] },
{ q:"대상 확인?", opt:["잘 알고 있음","조금 앎","헷갈림","잘 모름","처음 들음","해당 없음"] },
{ q:"소득 상태?", opt:["고정 수입","기초연금","근로소득","무직","불안정","기타"] },
{ q:"생활비 부담?", opt:["없음","보통","부담","매우 부담","긴급 필요","해당 없음"] },
{ q:"의료비 부담?", opt:["괜찮음","조금 부담","진료비 과다","약비 부담","진료 미룸","해당 없음"] },
{ q:"신청 경험?", opt:["여러 번","1~2번","적음","없음","정보 부족","해당 없음"] },
{ q:"필요한 지원?", opt:["현금","생필품","의료비","주거비","긴급","기타"] },
{ q:"현재 상태?", opt:["괜찮음","도움 필요","필요 커짐","긴급","상담 필요","해당 없음"] }
]

};


/* ✅ 동작 변수 */
let index = 0;
let selectedAnswers = [];

/* ✅ 주제별 문항 가져오기 */
let questions = survey[topic];

/* ✅ 문항 로딩 */
function loadQuestion() {
    const q = questions[index];

    document.getElementById("question-text").innerText = q.q;

    const optionsDiv = document.getElementById("options");
    optionsDiv.innerHTML = "";

    q.opt.forEach(option => {
        const div = document.createElement("div");
        div.className = "option";
        div.innerText = option;

        div.onclick = () => {
            selectedAnswers.push(option);
            index++;

            if (index < questions.length) {
                loadQuestion();
            } else {
                submitAnswers();
            }
        };

        optionsDiv.appendChild(div);
    });

    document.getElementById("progress-text").innerText =
        `문항 ${index+1} / ${questions.length}`;
}

/* ✅ 결과 전송 */
function submitAnswers() {
    fetch("/analyze", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            topic,
            checks: selectedAnswers
        })
    })
    .then(res => res.json())
    .then(data => {
        window.location.href =
            `/result?text=${encodeURIComponent(data.result)}`;
    });
}

/* ✅ 실행 */
loadQuestion();

</script>

</body>
</html>
