<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë…¸ì„ë¹›í•˜ë£¨ ì¢…í•© ì§„ë‹¨ ê²°ê³¼</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        margin:0;
        background:#f5f7fb;
        font-family:'Noto Sans KR',sans-serif;
    }

    .wrap {
        max-width:920px;
        margin:25px auto;
    }

    .card {
        background:white;
        padding:28px;
        border-radius:16px;
        box-shadow:0 6px 20px rgba(0,0,0,0.08);
        margin-bottom:20px;
    }

    .title {
        font-size:24px;
        font-weight:800;
        margin-bottom:8px;
    }

    .sub {
        color:#6b7280;
        font-size:15px;
        margin-bottom:20px;
    }

    /* âœ… íŒŒë€/ë…¸ë€/ë¹¨ê°„ PILLS */
    .pill {
        display:inline-block;
        background:#eef2ff;
        padding:7px 12px;
        border-radius:999px;
        margin-right:8px;
        margin-bottom:6px;
        font-size:13px;
        color:#3742b1;
    }
    .pill.red { background:#ffe7e7; color:#b91c1c; }
    .pill.amber { background:#fff3cd; color:#b54706; }

    h3 {
        font-size:19px;
        margin-top:15px;
        margin-bottom:12px;
    }

    li {
        margin-bottom:8px;
        font-size:16px;
        line-height:1.45;
    }

    .btn {
        background:#2f6efc;
        color:white;
        padding:18px;
        border-radius:12px;
        text-align:center;
        font-size:18px;
        cursor:pointer;
        margin-top:18px;
    }

    /* âœ… ëª¨ë°”ì¼ ìµœì í™” */
    @media(max-width:480px){
        .wrap { margin:15px; }
        .card { padding:20px; }
        .title { font-size:22px; }
        h3 { font-size:18px; }
        li { font-size:15px; }
        .btn { font-size:17px; padding:16px; }
    }
</style>
</head>

<body>

<div class="wrap">

    <!-- âœ… ê²°ê³¼ í—¤ë” -->
    <div class="card">
        <div class="title">ğŸ’  ë…¸ì„ë¹›í•˜ë£¨ ì¢…í•© ì§„ë‹¨ ê²°ê³¼</div>
        <div class="sub">ì„ íƒí•œ ë¬¸í•­ ê¸°ë°˜ìœ¼ë¡œ ì´ˆê¸° ê±´ê°• ìƒíƒœë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.</div>

        <div id="pills"></div>
        <div id="summary" style="margin-top:15px;"></div>
    </div>

    <!-- âœ… ì…€í”„ ì¼€ì–´ -->
    <div class="card">
        <h3>âœ… ì…€í”„ ì¼€ì–´ ê°€ì´ë“œ</h3>
        <ul id="tips"></ul>
    </div>

    <!-- âœ… ìœ„í—˜ ì‹ í˜¸ -->
    <div class="card">
        <h3>âš ï¸ ì´ëŸ° ì¦ìƒì´ë©´ ì¦‰ì‹œ ì¡°ì¹˜</h3>
        <ul id="redflags"></ul>
        <div id="rf-note" style="color:#d62828;font-size:14px;margin-top:8px;"></div>
    </div>

    <!-- âœ… ì„ íƒí•œ í•­ëª© -->
    <div class="card">
        <h3>ğŸ§¾ ì„ íƒí•œ í•­ëª©</h3>
        <div id="selected"></div>
    </div>

    <!-- âœ… ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ -->
    <div class="btn" onclick="location.href='/'">â† ë‹¤ì‹œ ì§„ë‹¨í•˜ê¸°</div>

</div>

<script>
(function(){

    /* âœ… ì „ë‹¬ëœ payload íŒŒì‹± */
    const params = new URLSearchParams(location.search);
    const raw = params.get("payload");

    let data = {};
    try {
        data = JSON.parse(decodeURIComponent(raw));
    } catch(e) {
        console.error("âŒ ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜", e);
    }

    /* âœ… 1) ì œëª© ì•„ë˜ íŒŒë€ ì •ë³´ì¹© */
    const pills = [];
    pills.push(`<span class="pill">ì£¼ì œ: ${data.topic}</span>`);

    const sevClass =
        data.severity === "ë†’ìŒ" ? "red" :
        data.severity === "ì¤‘ê°„" ? "amber" :
        "";

    pills.push(`<span class="pill ${sevClass}">ìœ„í—˜ë„: ${data.severity}</span>`);

    document.getElementById("pills").innerHTML = pills.join(" ");


    /* âœ… 2) ì£¼ìš” ìš”ì•½ ì •ë³´ */
    document.getElementById("summary").innerHTML =
        `<div><b>ê¶Œì¥ ì¡°ì¹˜:</b> ${data.action}</div>
         <div style="margin-top:6px;"><b>ê¶Œì¥ ì§„ë£Œê³¼:</b> ${data.dept}</div>`;


    /* âœ… 3) ì…€í”„ ì¼€ì–´ */
    document.getElementById("tips").innerHTML =
        data.tips.map(t => `<li>${t}</li>`).join("");


    /* âœ… 4) ìœ„í—˜ ì‹ í˜¸(redflags) */
    document.getElementById("redflags").innerHTML =
        (data.redflags && data.redflags.length > 0)
            ? data.redflags.map(r => `<li>${r}</li>`).join("")
            : "<li>íŠ¹ë³„í•œ ì‘ê¸‰ ì‹ í˜¸ëŠ” ê°ì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</li>";

    if (data.redflags && data.redflags.length > 0) {
        document.getElementById("rf-note").innerText =
            "â€» ìœ„ ì¦ìƒì´ ë‚˜íƒ€ë‚˜ë©´ ì¦‰ì‹œ 119 ë˜ëŠ” ê°€ê¹Œìš´ ì‘ê¸‰ì‹¤ ë°©ë¬¸ì´ í•„ìš”í•©ë‹ˆë‹¤.";
    }


    /* âœ… 5) ì„ íƒí•œ í•­ëª© ëª©ë¡ */
    document.getElementById("selected").innerHTML =
        data.checks.map(c => `<span class="pill">${c}</span>`).join(" ");

})();
</script>

</body>
</html>
